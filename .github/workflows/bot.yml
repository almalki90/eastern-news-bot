name: Telegram Admin Bot 24/7

on:
  push:
    branches: [ main ]
  schedule:
    # ÙŠØ¹Ù…Ù„ ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø§Ù„ØªÙˆÙ‚Ù
    - cron: '*/5 * * * *'
  workflow_dispatch:

jobs:
  run-bot:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # 6 Ø³Ø§Ø¹Ø§Øª
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        pip install requests
    
    - name: Run Telegram Bot
      env:
        BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
      run: |
        echo "ðŸš€ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª..."
        python3 bot_admin.py &
        BOT_PID=$!
        
        # Ø¥Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø¨ÙˆØª ÙŠØ¹Ù…Ù„ Ù„Ù…Ø¯Ø© 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ø«Ù… ÙŠÙØ¹Ø§Ø¯ ØªØ´ØºÙŠÙ„Ù‡
        sleep 300
        
        echo "âœ… Ø§Ù„Ø¨ÙˆØª Ø¹Ù…Ù„ Ù„Ù…Ø¯Ø© 5 Ø¯Ù‚Ø§Ø¦Ù‚ØŒ Ø³ÙŠÙØ¹Ø§Ø¯ ØªØ´ØºÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"
        kill $BOT_PID 2>/dev/null || true
